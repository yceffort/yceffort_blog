---
title: "자바스크립트의 이벤트루프, 태스크, 그리고 마이크로 태스크"
date: 2019-09-06 09:51:26
layout: post
tags: [javascript]
publisehd: false
---

## 자바스크립트는 단일 스레드 기반의 언어

자바스크립트는 '단일 스레드' 기반의 언어다. 즉, 스레드가 하나이기 때문에 동시에 하나의 작업만 처리할 수 있다. 그러나 자바스크립트가 사용되는 웹을 곰곰히 생각해보면 동시에 여러개의 작업을 처리하는 모습을 볼 수 있다. 스레드가 하나인 자바스크립트는 동시성을 어떻게 처리할까? 먼저 브라우저 구동환경을 살펴보자.

![browser](https://miro.medium.com/max/1600/1*iHhUyO4DliDwa6x_cO5E3A.gif)

![nodejs](https://image.toast.com/aaaadh/real/2018/techblog/Bt5ywJrIEAAKJQt.jpg)

위 이미지에서, 자바스크립트 엔진은 메모리 할당을 관리하는 heap과 call stack만 존재하는 것을 알 수 있다. 즉, 동시성에 대한 처리는 자바스크립트 외부에서 처리하고 있음을 알 수 있다. 즉, 정리해서 말하면 자바스크립트는 단일 스레드기반의 언어라서, 단일 호출 스택을 사용하지만, 실제로 자바스크립트를 이용하는 환경 (브라우저, Nodejs)에서는 여러개의 스레드를 활용하며, 이러한 환경을 자바스크립트 엔진과 상호 연동하기 위해서 사용하는 것이 바로 **이벤트 루프**다.


## 단일 호출 스택, Run-to-Completion

자바스크립트의 함수가 실행되는 방식을 `Run-to-Completion`, 하나의 함수가 실행되면 이게 끝날 떄까지는 다른 어떤 작업도 끼어들지 못함을 의미한다. 자바스크립트는 하나의 호출 스택을 사용하며, 